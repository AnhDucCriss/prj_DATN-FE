<button type="button" class="btn btn-dark mb-3" data-bs-toggle="modal" data-bs-target="#addAccountModal">
    <i class="bi bi-plus-circle"></i> Tạo nhân viên
</button>

<div class="modal fade" id="addAccountModal" tabindex="-1" aria-labelledby="addAccountModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addAccountModalLabel">Thêm nhân viên</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form (ngSubmit)="addAccount()" #addAccountForm="ngForm" novalidate>
                    <!-- Tên nhân viên -->
                    <div class="mb-3">
                        <label for="fullName" class="form-label">Tên nhân viên <span class="text-danger">*</span></label>
                        <input 
                            type="text" 
                            class="form-control" 
                            [class.is-invalid]="fullName.invalid && (fullName.dirty || fullName.touched)"
                            [class.is-valid]="fullName.valid && (fullName.dirty || fullName.touched)"
                            id="fullName" 
                            name="fullName" 
                            required 
                            minlength="2"
                            maxlength="50"
                            pattern="^[a-zA-ZÀ-ỹ\s]+$"
                            [(ngModel)]="newStaff.fullName"
                            #fullName="ngModel">
                        <div class="invalid-feedback">
                            <div *ngIf="fullName.errors?.['required']">Tên nhân viên không được để trống</div>
                            <div *ngIf="fullName.errors?.['minlength']">Tên nhân viên phải có ít nhất 2 ký tự</div>
                            <div *ngIf="fullName.errors?.['maxlength']">Tên nhân viên không được quá 50 ký tự</div>
                            <div *ngIf="fullName.errors?.['pattern']">Tên nhân viên chỉ được chứa chữ cái và khoảng trắng</div>
                        </div>
                    </div>

                    <!-- Giới tính -->
                    <div class="mb-3">
                        <label for="gender" class="form-label">Giới tính <span class="text-danger">*</span></label>
                        <select 
                            id="gender" 
                            class="form-select" 
                            [class.is-invalid]="gender.invalid && (gender.dirty || gender.touched)"
                            [class.is-valid]="gender.valid && (gender.dirty || gender.touched)"
                            required 
                            [(ngModel)]="newStaff.gender" 
                            name="gender"
                            #gender="ngModel">
                            <option [ngValue]="null" disabled>-- Chọn giới tính --</option>
                            <option [ngValue]="0">Nam</option>
                            <option [ngValue]="1">Nữ</option>
                        </select>
                        <div class="invalid-feedback">
                            <div *ngIf="gender.errors?.['required']">Vui lòng chọn giới tính</div>
                        </div>
                    </div>

                    <!-- Số điện thoại -->
                    <div class="mb-3">
                        <label for="phone" class="form-label">Số điện thoại <span class="text-danger">*</span></label>
                        <input 
                            type="tel" 
                            class="form-control" 
                            [class.is-invalid]="phone.invalid && (phone.dirty || phone.touched)"
                            [class.is-valid]="phone.valid && (phone.dirty || phone.touched)"
                            id="phone" 
                            name="phone" 
                            required 
                            pattern="^(0[3|5|7|8|9])+([0-9]{8})$"
                            [(ngModel)]="newStaff.phone"
                            #phone="ngModel"
                            placeholder="Ví dụ: 0987654321">
                        <div class="invalid-feedback">
                            <div *ngIf="phone.errors?.['required']">Số điện thoại không được để trống</div>
                            <div *ngIf="phone.errors?.['pattern']">Số điện thoại không hợp lệ (phải là số di động Việt Nam)</div>
                        </div>
                    </div>

                    <!-- Email -->
                    <div class="mb-3">
                        <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                        <input 
                            type="email" 
                            class="form-control" 
                            [class.is-invalid]="email.invalid && (email.dirty || email.touched)"
                            [class.is-valid]="email.valid && (email.dirty || email.touched)"
                            id="email" 
                            name="email" 
                            required 
                            email
                            maxlength="100"
                            [(ngModel)]="newStaff.email"
                            #email="ngModel"
                            placeholder="example@email.com">
                        <div class="invalid-feedback">
                            <div *ngIf="email.errors?.['required']">Email không được để trống</div>
                            <div *ngIf="email.errors?.['email']">Email không đúng định dạng</div>
                            <div *ngIf="email.errors?.['maxlength']">Email không được quá 100 ký tự</div>
                        </div>
                    </div>

                    <!-- Chức vụ -->
                    <div class="mb-3">
                        <label for="position" class="form-label">Chức vụ <span class="text-danger">*</span></label>
                        <input 
                            type="text" 
                            class="form-control" 
                            [class.is-invalid]="position.invalid && (position.dirty || position.touched)"
                            [class.is-valid]="position.valid && (position.dirty || position.touched)"
                            id="position" 
                            name="position" 
                            required 
                            minlength="2"
                            maxlength="30"
                            [(ngModel)]="newStaff.position"
                            #position="ngModel"
                            placeholder="Ví dụ: Nhân viên bán hàng">
                        <div class="invalid-feedback">
                            <div *ngIf="position.errors?.['required']">Chức vụ không được để trống</div>
                            <div *ngIf="position.errors?.['minlength']">Chức vụ phải có ít nhất 2 ký tự</div>
                            <div *ngIf="position.errors?.['maxlength']">Chức vụ không được quá 30 ký tự</div>
                        </div>
                    </div>

                    <!-- Submit button -->
                    <button 
                        type="submit" 
                        class="btn btn-primary w-100" 
                        [disabled]="addAccountForm.invalid"
                        data-bs-dismiss="modal">
                        <i class="bi bi-person-plus"></i> Thêm nhân viên
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>